=== RUN   TestEngines
badger 2025/10/27 14:35:17 INFO: All 0 tables opened in 0s
badger 2025/10/27 14:35:17 INFO: Discard stats nextEmptySlot: 0
badger 2025/10/27 14:35:17 INFO: Set nextTxnTs to 0
    engine_test.go:30: testLTNGDBEngineV2
    engine_test.go:51: CreateItem
    engine_test.go:71: 
        min: 57.666µs
        max: 57.666µs
        avg: 57.666µs
        
    engine_test.go:75: ListItems
    engine_test.go:91: 
        min: 1.792µs
        max: 1.792µs
        avg: 1.792µs
        
    engine_test.go:95: UpsertItem
    engine_test.go:115: 
        min: 10.917µs
        max: 10.917µs
        avg: 10.917µs
        
    engine_test.go:119: DeleteItem
    engine_test.go:141: 
        min: 9.166µs
        max: 9.166µs
        avg: 9.166µs
        
{"time":"2025-10-27T14:35:17.591478-03:00","level":"ERROR","msg":"error on trigger upsert indexed action item info data","item_info_data":"!ERROR:json: unsupported type: chan error","error":{"msg":"responseAccumulator: error opening/creating a temporary truncated file at .ltngdb/v2/stores/user-store/tmp-1e000000334953397148775658343343574b6378696e677240656d61696c2e636f6d.ptk: error opening .ltngdb/v2/stores/user-store/1e000000334953397148775658343343574b6378696e677240656d61696c2e636f6d.ptk file: open .ltngdb/v2/stores/user-store/1e000000334953397148775658343343574b6378696e677240656d61696c2e636f6d.ptk: file exists: error opening/creating a temporary truncated file at .ltngdb/v2/stores/user-store/indexed-list/tmp-1e000000334953397148775658343343574b6378696e677240656d61696c2e636f6d.ptk: error opening .ltngdb/v2/stores/user-store/indexed-list/1e000000334953397148775658343343574b6378696e677240656d61696c2e636f6d.ptk file: open .ltngdb/v2/stores/user-store/indexed-list/1e000000334953397148775658343343574b6378696e677240656d61696c2e636f6d.ptk: file exists","trace":"/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/vendor/gitlab.com/pietroski-software-company/golang/devex/errorsx/errorsx.go:82:gitlab.com/pietroski-software-company/golang/devex/errorsx.Wrap\n/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/internal/adaptors/datastore/ltng-engine/v2/operator_saga.go:29:gitlab.com/pietroski-software-company/lightning-db/internal/adaptors/datastore/ltng-engine/v2.ResponseAccumulator\n/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/internal/adaptors/datastore/ltng-engine/v2/operator_upsert_saga.go:135:gitlab.com/pietroski-software-company/lightning-db/internal/adaptors/datastore/ltng-engine/v2.(*upsertSaga).indexTrigger\n/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/internal/adaptors/datastore/ltng-engine/v2/operator_upsert_saga.go:69:gitlab.com/pietroski-software-company/lightning-db/internal/adaptors/datastore/ltng-engine/v2.(*upsertSaga).ListenAndTrigger.func1\n/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/vendor/gitlab.com/pietroski-software-company/golang/devex/loop/loop.go:164:gitlab.com/pietroski-software-company/golang/devex/loop.RunFromChannel[...]\n/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/internal/adaptors/datastore/ltng-engine/v2/operator_upsert_saga.go:63:gitlab.com/pietroski-software-company/lightning-db/internal/adaptors/datastore/ltng-engine/v2.(*upsertSaga).ListenAndTrigger\n/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/internal/adaptors/datastore/ltng-engine/v2/operator_upsert_saga.go:56:gitlab.com/pietroski-software-company/lightning-db/internal/adaptors/datastore/ltng-engine/v2.newUpsertSaga.func9\n"},"trace_id":"019a26bd-1657-777a-9c66-6cb53f6d7c55"}
{"time":"2025-10-27T14:35:17.597905-03:00","level":"ERROR","msg":"error executing context command","cmd":"/bin/sh -c mv -f .ltngdb/v2/stores/user-store/indexed-list/tmp-1e000000334953397148775658343343574b6378696e677240656d61696c2e636f6d.ptk .ltngdb/v2/stores/user-store/indexed-list/1e000000334953397148775658343343574b6378696e677240656d61696c2e636f6d.ptk","output":"mv: rename .ltngdb/v2/stores/user-store/indexed-list/tmp-1e000000334953397148775658343343574b6378696e677240656d61696c2e636f6d.ptk to .ltngdb/v2/stores/user-store/indexed-list/1e000000334953397148775658343343574b6378696e677240656d61696c2e636f6d.ptk: No such file or directory\n","err":{"msg":"exit status 1","trace":[{"function":"execx.RunContextOutput","file":"/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/vendor/gitlab.com/pietroski-software-company/golang/devex/execx/exec.go","line":57},{"function":"execx.RunContext","file":"/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/vendor/gitlab.com/pietroski-software-company/golang/devex/execx/exec.go","line":17},{"function":"osx.MvFileExec","file":"/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/pkg/tools/osx/osx.go","line":21},{"function":"v2.(*upsertSaga).deleteIndexListItemFromDiskOnThread.func1","file":"/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/internal/adaptors/datastore/ltng-engine/v2/operator_upsert_saga.go","line":412},{"function":"loop.RunFromChannel[...]","file":"/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/vendor/gitlab.com/pietroski-software-company/golang/devex/loop/loop.go","line":164},{"function":"v2.(*upsertSaga).deleteIndexListItemFromDiskOnThread","file":"/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/internal/adaptors/datastore/ltng-engine/v2/operator_upsert_saga.go","line":405},{"function":"v2.newUpsertSaga.func8","file":"/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/internal/adaptors/datastore/ltng-engine/v2/operator_upsert_saga.go","line":52}]},"trace_id":"019a26bd-165d-7dfa-871a-22b3b3773346"}
{"time":"2025-10-27T14:35:17.597909-03:00","level":"ERROR","msg":"error executing context command","cmd":"/bin/sh -c mv -f .ltngdb/v2/stores/user-store/tmp-1e000000334953397148775658343343574b6378696e677240656d61696c2e636f6d.ptk .ltngdb/v2/stores/user-store/1e000000334953397148775658343343574b6378696e677240656d61696c2e636f6d.ptk","output":"mv: rename .ltngdb/v2/stores/user-store/tmp-1e000000334953397148775658343343574b6378696e677240656d61696c2e636f6d.ptk to .ltngdb/v2/stores/user-store/1e000000334953397148775658343343574b6378696e677240656d61696c2e636f6d.ptk: No such file or directory\n","err":{"msg":"exit status 1","trace":[{"function":"execx.RunContextOutput","file":"/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/vendor/gitlab.com/pietroski-software-company/golang/devex/execx/exec.go","line":57},{"function":"execx.RunContext","file":"/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/vendor/gitlab.com/pietroski-software-company/golang/devex/execx/exec.go","line":17},{"function":"osx.MvFileExec","file":"/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/pkg/tools/osx/osx.go","line":21},{"function":"v2.(*upsertSaga).deleteItemOnDiskOnThread.func1","file":"/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/internal/adaptors/datastore/ltng-engine/v2/operator_upsert_saga.go","line":249},{"function":"loop.RunFromChannel[...]","file":"/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/vendor/gitlab.com/pietroski-software-company/golang/devex/loop/loop.go","line":164},{"function":"v2.(*upsertSaga).deleteItemOnDiskOnThread","file":"/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/internal/adaptors/datastore/ltng-engine/v2/operator_upsert_saga.go","line":242},{"function":"v2.newUpsertSaga.func6","file":"/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/internal/adaptors/datastore/ltng-engine/v2/operator_upsert_saga.go","line":46}]},"trace_id":"019a26bd-165d-7dfe-9543-4858604b57e2"}
{"time":"2025-10-27T14:35:17.598112-03:00","level":"ERROR","msg":"error rolling back trigger for indexed upsert item info data","item_info_data":"!ERROR:json: unsupported type: chan error","error":{"msg":"responseAccumulator: exit status 1: exit status 1","trace":"/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/vendor/gitlab.com/pietroski-software-company/golang/devex/errorsx/errorsx.go:82:gitlab.com/pietroski-software-company/golang/devex/errorsx.Wrap\n/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/internal/adaptors/datastore/ltng-engine/v2/operator_saga.go:29:gitlab.com/pietroski-software-company/lightning-db/internal/adaptors/datastore/ltng-engine/v2.ResponseAccumulator\n/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/internal/adaptors/datastore/ltng-engine/v2/operator_upsert_saga.go:215:gitlab.com/pietroski-software-company/lightning-db/internal/adaptors/datastore/ltng-engine/v2.(*upsertSaga).indexRollback\n/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/internal/adaptors/datastore/ltng-engine/v2/operator_upsert_saga.go:185:gitlab.com/pietroski-software-company/lightning-db/internal/adaptors/datastore/ltng-engine/v2.(*upsertSaga).RollbackTrigger\n/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/internal/adaptors/datastore/ltng-engine/v2/operator_upsert_saga.go:142:gitlab.com/pietroski-software-company/lightning-db/internal/adaptors/datastore/ltng-engine/v2.(*upsertSaga).indexTrigger\n/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/internal/adaptors/datastore/ltng-engine/v2/operator_upsert_saga.go:69:gitlab.com/pietroski-software-company/lightning-db/internal/adaptors/datastore/ltng-engine/v2.(*upsertSaga).ListenAndTrigger.func1\n/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/vendor/gitlab.com/pietroski-software-company/golang/devex/loop/loop.go:164:gitlab.com/pietroski-software-company/golang/devex/loop.RunFromChannel[...]\n/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/internal/adaptors/datastore/ltng-engine/v2/operator_upsert_saga.go:63:gitlab.com/pietroski-software-company/lightning-db/internal/adaptors/datastore/ltng-engine/v2.(*upsertSaga).ListenAndTrigger\n/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/internal/adaptors/datastore/ltng-engine/v2/operator_upsert_saga.go:56:gitlab.com/pietroski-software-company/lightning-db/internal/adaptors/datastore/ltng-engine/v2.newUpsertSaga.func9\n"},"trace_id":"019a26bd-165e-71b9-aee7-c9e050d6d6c9"}
{"time":"2025-10-27T14:35:17.59816-03:00","level":"ERROR","msg":"error accumulating item info data from file queue on op type","op_type":"upsert","error":{"msg":"responseAccumulator: responseAccumulator: error opening/creating a temporary truncated file at .ltngdb/v2/stores/user-store/tmp-1e000000334953397148775658343343574b6378696e677240656d61696c2e636f6d.ptk: error opening .ltngdb/v2/stores/user-store/1e000000334953397148775658343343574b6378696e677240656d61696c2e636f6d.ptk file: open .ltngdb/v2/stores/user-store/1e000000334953397148775658343343574b6378696e677240656d61696c2e636f6d.ptk: file exists: error opening/creating a temporary truncated file at .ltngdb/v2/stores/user-store/indexed-list/tmp-1e000000334953397148775658343343574b6378696e677240656d61696c2e636f6d.ptk: error opening .ltngdb/v2/stores/user-store/indexed-list/1e000000334953397148775658343343574b6378696e677240656d61696c2e636f6d.ptk file: open .ltngdb/v2/stores/user-store/indexed-list/1e000000334953397148775658343343574b6378696e677240656d61696c2e636f6d.ptk: file exists","trace":"/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/vendor/gitlab.com/pietroski-software-company/golang/devex/errorsx/errorsx.go:82:gitlab.com/pietroski-software-company/golang/devex/errorsx.Wrap\n/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/internal/adaptors/datastore/ltng-engine/v2/operator_saga.go:29:gitlab.com/pietroski-software-company/lightning-db/internal/adaptors/datastore/ltng-engine/v2.ResponseAccumulator\n/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/internal/adaptors/datastore/ltng-engine/v2/operator_upsert_saga.go:135:gitlab.com/pietroski-software-company/lightning-db/internal/adaptors/datastore/ltng-engine/v2.(*upsertSaga).indexTrigger\n/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/internal/adaptors/datastore/ltng-engine/v2/operator_upsert_saga.go:69:gitlab.com/pietroski-software-company/lightning-db/internal/adaptors/datastore/ltng-engine/v2.(*upsertSaga).ListenAndTrigger.func1\n/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/vendor/gitlab.com/pietroski-software-company/golang/devex/loop/loop.go:164:gitlab.com/pietroski-software-company/golang/devex/loop.RunFromChannel[...]\n/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/internal/adaptors/datastore/ltng-engine/v2/operator_upsert_saga.go:63:gitlab.com/pietroski-software-company/lightning-db/internal/adaptors/datastore/ltng-engine/v2.(*upsertSaga).ListenAndTrigger\n/Users/pietroski/Projects/PTK_SWE/Lightning-Ecossystem/Lightning-Node/internal/adaptors/datastore/ltng-engine/v2/operator_upsert_saga.go:56:gitlab.com/pietroski-software-company/lightning-db/internal/adaptors/datastore/ltng-engine/v2.newUpsertSaga.func9\n"},"trace_id":"019a26bd-165e-7284-95f6-14f61fbb6898"}
--- PASS: TestEngines (0.09s)
PASS
ok  	gitlab.com/pietroski-software-company/lightning-db/tests/integration	0.571s
